image: docker:24.0.5 # Use a Docker-enabled image

pipelines:
  default:
    - step:
        name: Setup Docker
        services:
          - docker
        caches:
          - docker
        script:
          - apk add --no-cache bash # Install bash if not already available
          - chmod +x build_docker_image.sh
          - ./build_docker_image.sh
    - step:
        name: Build Debug APK
        script:
          - chmod +x build_debug.sh
          - ./build_debug.sh
        artifacts:
          - app/build/outputs/debug/app-debug.apk

definitions:
  services:
    docker:
      image: docker:24.0.5-dind # Docker-in-Docker service

